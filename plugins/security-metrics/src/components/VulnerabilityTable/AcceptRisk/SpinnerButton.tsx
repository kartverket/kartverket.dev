import Button, { ButtonProps } from '@mui/material/Button';
import CircularProgress from '@mui/material/CircularProgress';

type SpinnerButtonProps = ButtonProps & {
  loading?: boolean;
  spinnerSize?: number;
};

export const SpinnerButton = ({
  spinnerSize = 18,
  loading,
  children,
  onClick,
}: SpinnerButtonProps) => {
  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
    if (loading) return;
    onClick?.(e);
  };

  return (
    <Button onClick={handleClick} disabled={loading}>
      {children}
      {loading && (
        <CircularProgress
          size={spinnerSize}
          sx={{ position: 'absolute', inset: 0, m: 'auto' }}
        />
      )}
    </Button>
  );
};
