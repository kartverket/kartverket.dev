import Box from '@mui/material/Box';
import { formatDate } from 'date-fns';
import { useUserInfo } from '../../../hooks/useUserInfo';
import Avatar from '@mui/material/Avatar';

interface CLastEditedByProps {
  changedBy: string;
  changedAt: Date;
}

export const LastEditedBy = ({ changedBy, changedAt }: CLastEditedByProps) => {
  const { data: user } = useUserInfo(changedBy);

  const displayName = user?.spec?.profile?.displayName;
  const image = user?.spec?.profile?.picture;

  return (
    <Box display="flex" alignItems="center" gap={1}>
      {`Sist endret ${formatDate(changedAt, 'dd.MM.yyyy')}`}
      {(displayName || changedBy) && ' av '}
      {displayName && <Avatar src={image} />}
      {displayName || changedBy}
    </Box>
  );
};
